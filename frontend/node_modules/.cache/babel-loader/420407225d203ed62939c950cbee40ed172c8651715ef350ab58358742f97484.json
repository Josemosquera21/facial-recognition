{"ast":null,"code":"import React,{useState}from'react';import{useLocation,useNavigate}from'react-router-dom';import axios from'axios';import WebcamCapture from'./WebcamCapture';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function UpdateUser(){var _location$state;const location=useLocation();const navigate=useNavigate();const user=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.user;const[formData,setFormData]=useState({name:(user===null||user===void 0?void 0:user.name)||'',identification:(user===null||user===void 0?void 0:user.identification)||'',password:'',photo:(user===null||user===void 0?void 0:user.photo)||''});const[message,setMessage]=useState('');const validateName=value=>{return /^[A-Za-zÁáÉéÍíÓóÚúÑñ\\s]+$/.test(value);};const validateIdentification=value=>{return /^\\d{6,12}$/.test(value);};const validatePassword=value=>{if(!value)return true;// Permitir contraseña vacía para mantener la actual\nreturn /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,12}$/.test(value);};const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();if(!validateName(formData.name)){setMessage('El nombre solo debe contener letras');return;}if(!validateIdentification(formData.identification)){setMessage('La identificación debe contener entre 6 y 12 números');return;}if(formData.password&&!validatePassword(formData.password)){setMessage('La contraseña debe tener entre 8 y 12 caracteres, incluyendo letras y números');return;}try{const response=await axios.put(`http://localhost:5000/api/users/${user.identification}`,formData);if(response.data.success){setMessage('Usuario actualizado correctamente');setTimeout(()=>navigate('/'),2000);}}catch(error){var _error$response,_error$response$data;setMessage(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Error actualizando usuario');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Actualizar Usuario\"}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:message}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleChange,placeholder:\"Nombre (solo letras)\",pattern:\"[A-Za-z\\xC1\\xE1\\xC9\\xE9\\xCD\\xED\\xD3\\xF3\\xDA\\xFA\\xD1\\xF1\\\\s]+\",title:\"Solo se permiten letras\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"identification\",value:formData.identification,disabled:true,placeholder:\"N\\xFAmero de Identificaci\\xF3n\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:formData.password,onChange:handleChange,placeholder:\"Nueva Contrase\\xF1a (dejar en blanco para mantener la actual)\",pattern:\"(?=.*[A-Za-z])(?=.*\\\\d)[A-Za-z\\\\d]{8,12}\",title:\"Debe contener entre 8 y 12 caracteres, incluyendo letras y n\\xFAmeros\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"webcam-container\",children:/*#__PURE__*/_jsx(WebcamCapture,{onCapture:photo=>setFormData({...formData,photo})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Guardar Cambios\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>navigate('/'),className:\"back-button\",children:\"Cancelar\"})]})]})]});}export default UpdateUser;","map":{"version":3,"names":["React","useState","useLocation","useNavigate","axios","WebcamCapture","jsx","_jsx","jsxs","_jsxs","UpdateUser","_location$state","location","navigate","user","state","formData","setFormData","name","identification","password","photo","message","setMessage","validateName","value","test","validateIdentification","validatePassword","handleChange","e","target","handleSubmit","preventDefault","response","put","data","success","setTimeout","error","_error$response","_error$response$data","className","children","onSubmit","type","onChange","placeholder","pattern","title","required","disabled","onCapture","onClick"],"sources":["C:/Users/josed/Desktop/facial/frontend/src/components/UpdateUser.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport WebcamCapture from './WebcamCapture';\r\n\r\nfunction UpdateUser() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const user = location.state?.user;\r\n\r\n  const [formData, setFormData] = useState({\r\n    name: user?.name || '',\r\n    identification: user?.identification || '',\r\n    password: '',\r\n    photo: user?.photo || ''\r\n  });\r\n  const [message, setMessage] = useState('');\r\n\r\n  const validateName = (value) => {\r\n    return /^[A-Za-zÁáÉéÍíÓóÚúÑñ\\s]+$/.test(value);\r\n  };\r\n\r\n  const validateIdentification = (value) => {\r\n    return /^\\d{6,12}$/.test(value);\r\n  };\r\n\r\n  const validatePassword = (value) => {\r\n    if (!value) return true; // Permitir contraseña vacía para mantener la actual\r\n    return /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,12}$/.test(value);\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateName(formData.name)) {\r\n      setMessage('El nombre solo debe contener letras');\r\n      return;\r\n    }\r\n    \r\n    if (!validateIdentification(formData.identification)) {\r\n      setMessage('La identificación debe contener entre 6 y 12 números');\r\n      return;\r\n    }\r\n    \r\n    if (formData.password && !validatePassword(formData.password)) {\r\n      setMessage('La contraseña debe tener entre 8 y 12 caracteres, incluyendo letras y números');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await axios.put(`http://localhost:5000/api/users/${user.identification}`, formData);\r\n      if (response.data.success) {\r\n        setMessage('Usuario actualizado correctamente');\r\n        setTimeout(() => navigate('/'), 2000);\r\n      }\r\n    } catch (error) {\r\n      setMessage(error.response?.data?.error || 'Error actualizando usuario');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-container\">\r\n      <h2>Actualizar Usuario</h2>\r\n      {message && <div className=\"message\">{message}</div>}\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"form-group\">\r\n          <input\r\n            type=\"text\"\r\n            name=\"name\"\r\n            value={formData.name}\r\n            onChange={handleChange}\r\n            placeholder=\"Nombre (solo letras)\"\r\n            pattern=\"[A-Za-zÁáÉéÍíÓóÚúÑñ\\s]+\"\r\n            title=\"Solo se permiten letras\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <input\r\n            type=\"text\"\r\n            name=\"identification\"\r\n            value={formData.identification}\r\n            disabled\r\n            placeholder=\"Número de Identificación\"\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={formData.password}\r\n            onChange={handleChange}\r\n            placeholder=\"Nueva Contraseña (dejar en blanco para mantener la actual)\"\r\n            pattern=\"(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,12}\"\r\n            title=\"Debe contener entre 8 y 12 caracteres, incluyendo letras y números\"\r\n          />\r\n        </div>\r\n        <div className=\"webcam-container\">\r\n          <WebcamCapture onCapture={(photo) => setFormData({...formData, photo})} />\r\n        </div>\r\n        <div className=\"button-group\">\r\n          <button type=\"submit\">Guardar Cambios</button>\r\n          <button type=\"button\" onClick={() => navigate('/')} className=\"back-button\">\r\n            Cancelar\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UpdateUser;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}