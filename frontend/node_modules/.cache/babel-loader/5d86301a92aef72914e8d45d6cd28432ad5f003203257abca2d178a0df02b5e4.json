{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import WebcamCapture from'./WebcamCapture';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Register(){const navigate=useNavigate();const[name,setName]=useState('');const[identification,setIdentification]=useState('');const[password,setPassword]=useState('');const[photo,setPhoto]=useState(null);const[message,setMessage]=useState('');const validateName=value=>{return /^[A-Za-zÁáÉéÍíÓóÚúÑñ\\s]+$/.test(value);};const validateIdentification=value=>{return /^\\d{6,12}$/.test(value);};const validatePassword=value=>{return /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,12}$/.test(value);};const handleSubmit=async e=>{e.preventDefault();if(!validateName(name)){setMessage('El nombre solo debe contener letras');return;}if(!validateIdentification(identification)){setMessage('La identificación debe contener entre 6 y 12 números');return;}if(!validatePassword(password)){setMessage('La contraseña debe tener entre 8 y 12 caracteres, incluyendo letras y números');return;}try{const response=await axios.post('http://localhost:5000/api/users',{name,identification,password,photo});setMessage(response.data.message);setName('');setIdentification('');setPassword('');setPhoto(null);}catch(error){var _error$response,_error$response$data;console.log('Error details:',error);// Para ver el error completo en la consola\nsetMessage(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Error en el registro: '+error.message);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"register-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Registro\"}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"message\",children:message}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:e=>setName(e.target.value),placeholder:\"Nombre (solo letras)\",pattern:\"[A-Za-z\\xC1\\xE1\\xC9\\xE9\\xCD\\xED\\xD3\\xF3\\xDA\\xFA\\xD1\\xF1\\\\s]+\",title:\"Solo se permiten letras\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:identification,onChange:e=>setIdentification(e.target.value),placeholder:\"N\\xFAmero de Identificaci\\xF3n (6-12 d\\xEDgitos)\",pattern:\"\\\\d{6,12}\",title:\"Debe contener entre 6 y 12 n\\xFAmeros\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Contrase\\xF1a (8-12 caracteres, letras y n\\xFAmeros)\",pattern:\"(?=.*[A-Za-z])(?=.*\\\\d)[A-Za-z\\\\d]{8,12}\",title:\"Debe contener entre 8 y 12 caracteres, incluyendo letras y n\\xFAmeros\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"webcam-container\",children:/*#__PURE__*/_jsx(WebcamCapture,{onCapture:setPhoto})}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Registrar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>navigate('/'),className:\"back-button\",children:\"Volver a Iniciar Sesi\\xF3n\"})]})]})]});}export default Register;","map":{"version":3,"names":["React","useState","useNavigate","axios","WebcamCapture","jsx","_jsx","jsxs","_jsxs","Register","navigate","name","setName","identification","setIdentification","password","setPassword","photo","setPhoto","message","setMessage","validateName","value","test","validateIdentification","validatePassword","handleSubmit","e","preventDefault","response","post","data","error","_error$response","_error$response$data","console","log","className","children","onSubmit","type","onChange","target","placeholder","pattern","title","required","onCapture","onClick"],"sources":["C:/Users/josed/Desktop/facial/frontend/src/components/Register.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport WebcamCapture from './WebcamCapture';\r\n\r\nfunction Register() {\r\n  const navigate = useNavigate();\r\n  const [name, setName] = useState('');\r\n  const [identification, setIdentification] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [photo, setPhoto] = useState(null);\r\n  const [message, setMessage] = useState('');\r\n\r\n  const validateName = (value) => {\r\n    return /^[A-Za-zÁáÉéÍíÓóÚúÑñ\\s]+$/.test(value);\r\n  };\r\n\r\n  const validateIdentification = (value) => {\r\n    return /^\\d{6,12}$/.test(value);\r\n  };\r\n\r\n  const validatePassword = (value) => {\r\n    return /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,12}$/.test(value);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateName(name)) {\r\n      setMessage('El nombre solo debe contener letras');\r\n      return;\r\n    }\r\n    \r\n    if (!validateIdentification(identification)) {\r\n      setMessage('La identificación debe contener entre 6 y 12 números');\r\n      return;\r\n    }\r\n    \r\n    if (!validatePassword(password)) {\r\n      setMessage('La contraseña debe tener entre 8 y 12 caracteres, incluyendo letras y números');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await axios.post('http://localhost:5000/api/users', {\r\n        name,\r\n        identification,\r\n        password,\r\n        photo\r\n      });\r\n      setMessage(response.data.message);\r\n      setName('');\r\n      setIdentification('');\r\n      setPassword('');\r\n      setPhoto(null);\r\n    } catch (error) {\r\n      console.log('Error details:', error);  // Para ver el error completo en la consola\r\n      setMessage(error.response?.data?.error || 'Error en el registro: ' + error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"register-container\">\r\n      <h2>Registro</h2>\r\n      {message && <p className=\"message\">{message}</p>}\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"form-group\">\r\n          <input\r\n            type=\"text\"\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n            placeholder=\"Nombre (solo letras)\"\r\n            pattern=\"[A-Za-zÁáÉéÍíÓóÚúÑñ\\s]+\"\r\n            title=\"Solo se permiten letras\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <input\r\n            type=\"text\"\r\n            value={identification}\r\n            onChange={(e) => setIdentification(e.target.value)}\r\n            placeholder=\"Número de Identificación (6-12 dígitos)\"\r\n            pattern=\"\\d{6,12}\"\r\n            title=\"Debe contener entre 6 y 12 números\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <input\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            placeholder=\"Contraseña (8-12 caracteres, letras y números)\"\r\n            pattern=\"(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,12}\"\r\n            title=\"Debe contener entre 8 y 12 caracteres, incluyendo letras y números\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"webcam-container\">\r\n          <WebcamCapture onCapture={setPhoto} />\r\n        </div>\r\n        <div className=\"button-group\">\r\n          <button type=\"submit\">Registrar</button>\r\n          <button \r\n            type=\"button\" \r\n            onClick={() => navigate('/')} \r\n            className=\"back-button\"\r\n          >\r\n            Volver a Iniciar Sesión\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}